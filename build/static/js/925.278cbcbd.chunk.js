"use strict";(self.webpackChunksirius_tech_motors=self.webpackChunksirius_tech_motors||[]).push([[925],{53016:(e,t,a)=>{a.d(t,{Z:()=>o});a(72791);var l=a(2409),n=a(49389),r=a(80184);const o=e=>{let{label:t,name:a,required:o,required_text:s,warning:i}=e;return(0,r.jsx)(l.Z.Item,{label:i?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{children:i})]}):(0,r.jsx)("div",{children:t}),name:a,rules:[{required:o,message:s}],children:(0,r.jsx)(n.default,{})})}},56343:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var l=a(72791),n=a(521),r=a(2409),o=a(50419),s=a(66106),i=a(30914),c=a(93086),d=a(50881),u=a(83734),p=a(87309),v=a(91933),b=a(27169),y=a(93165),m=a(57689),g=a(16030),f=a(46273),h=a(77221),x=a(53016),Z=a(80184);const{Title:j}=n.default,k={image:[],title_uz:"",title_ru:"",category:"",sub_category:"",brand:"",stock:""},C=()=>{const[e]=r.Z.useForm(),t=(0,m.s0)(),{editId:a}=(0,g.v9)((e=>e.editData)),n=(0,g.I0)(),[C,w]=(0,l.useState)([]),[_,E]=(0,l.useState)(""),{data:P,refetch:F,isSuccess:S}=(0,v.useQuery)("get-categories",(()=>b.Z.getData("/categories/")),{enabled:!1}),{data:O,refetch:I,isSuccess:V}=(0,v.useQuery)("get-sub-categories",(()=>b.Z.getData("/sub_categories/")),{enabled:!1}),{data:L,refetch:M,isSuccess:D}=(0,v.useQuery)("get-brand",(()=>b.Z.getData("/brands/")),{enabled:!1}),{data:T,refetch:q,isSuccess:N}=(0,v.useQuery)("get-stock",(()=>b.Z.getData("/stocks/")),{enabled:!1}),{mutate:R,data:z,isLoading:A,isSuccess:B}=(0,v.useMutation)((e=>{let{url:t,data:a}=e;return b.Z.postData(t,a)}),{onSuccess:()=>{o.ZP.success("Success")},onError:e=>{for(let t in e.response.data)o.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:Q,data:U,refetch:G,isSuccess:H}=(0,v.useQuery)(["edit-index-category",a],(()=>b.Z.getDataByID("/index-categories",a)),{enabled:!1}),{mutate:J,isLoading:W,data:K,isSuccess:X}=(0,v.useMutation)((e=>{let{url:t,data:a,id:l}=e;return b.Z.editData(t,a,l)}),{onSuccess:()=>{o.ZP.success("Success")},onError:e=>{for(let t in e.response.data)o.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,l.useEffect)((()=>{X&&n({type:h.Pb,payload:""}),(B||X)&&t("/index-category")}),[z,K]),(0,l.useEffect)((()=>{""!==a&&G()}),[a]),(0,l.useEffect)((()=>{""===a&&e.setFieldsValue(k)}),[]),(0,l.useEffect)((()=>{const t=[{uid:null===U||void 0===U?void 0:U.id,name:null===U||void 0===U?void 0:U.id,status:"done",url:null===U||void 0===U?void 0:U.image}];if(H){var a,l;const n={image:t,title_uz:U.title_uz,title_ru:U.title_ru,category:null!==U.category?U.category.id:"",sub_category:null!==U.sub_category?U.sub_category.id:"",brand:null!==U.brand?U.brand.id:"",stock:null!==(null===U||void 0===U?void 0:U.stock)?null===U||void 0===U||null===(a=U.stock)||void 0===a?void 0:a.id:""};console.log(n),null!==U.category?(E("category"),e.setFieldsValue({checkProductType:"category"})):null!==U.sub_category?(E("subCategory"),e.setFieldsValue({checkProductType:"subCategory"})):null!==U.brand?(E("brand"),e.setFieldsValue({checkProductType:"brand"})):null!==(null===U||void 0===U||null===(l=U.stock)||void 0===l?void 0:l.stock_type)&&(E("stock"),e.setFieldsValue({checkProductType:"stock"})),w(t),e.setFieldsValue(n)}}),[U]);(0,l.useEffect)((()=>{"category"===_?(S||F(),e.setFieldsValue({sub_category:"",brand:"",stock:""})):"subCategory"===_?(V||I(),e.setFieldsValue({category:"",brand:"",stock:""})):"brand"===_?(D||M(),e.setFieldsValue({category:"",sub_category:"",stock:""})):"stock"===_&&(N||q(),e.setFieldsValue({category:"",sub_category:"",brand:""}))}),[_]),(0,l.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const a=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",a),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",a)}}),[]);const Y=(0,l.useMemo)((()=>null===T||void 0===T?void 0:T.map((e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title_ru})))),[T]),$=(0,l.useMemo)((()=>null===P||void 0===P?void 0:P.map((e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title_ru})))),[P]),ee=(0,l.useMemo)((()=>null===O||void 0===O?void 0:O.map((e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title_ru})))),[O]),te=(0,l.useMemo)((()=>null===L||void 0===L?void 0:L.map((e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title_ru})))),[L]);return(0,Z.jsx)("div",{children:A||Q||W?(0,Z.jsx)(y.QP,{}):(0,Z.jsxs)(r.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:k,onFinish:e=>{var t;console.log(e);const l=new FormData;var n;(l.append("title_uz",e.title_uz),l.append("title_ru",e.title_ru),l.append("category",e.category),l.append("sub_category",e.sub_category),l.append("brand",e.brand),l.append("stock",e.stock),null!==(t=C[0])&&void 0!==t&&t.originFileObj)&&l.append("image",null===(n=C[0])||void 0===n?void 0:n.originFileObj);H?J({url:"/index-categories",data:l,id:a}):R({url:"/index-categories/",data:l})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,Z.jsxs)(s.Z,{gutter:20,children:[(0,Z.jsx)(i.Z,{span:12,children:(0,Z.jsx)(x.Z,{required:!0,required_text:"Sarlavha talab qilinadi",label:"Sarlavha Uz",name:"title_uz"})}),(0,Z.jsx)(i.Z,{span:12,children:(0,Z.jsx)(x.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"title_ru"})})]}),(0,Z.jsx)(s.Z,{gutter:20,children:(0,Z.jsx)(i.Z,{span:12,children:(0,Z.jsx)(r.Z.Item,{label:"\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u0430\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",name:"image",rules:[{required:!0,message:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e."}],children:(0,Z.jsx)(f.Z,{children:(0,Z.jsx)(c.Z,{maxCount:1,fileList:C,listType:"picture-card",onChange:t=>{let{fileList:a}=t;w(a),e.setFieldsValue({image:a})},onPreview:async e=>{let t=e.url;t||(t=await new Promise((t=>{const a=new FileReader;a.readAsDataURL(e.originFileObj),a.onload=()=>t(a.result)})));const a=new Image;a.src=t;const l=window.open(t);null===l||void 0===l||l.document.write(a.outerHTML)},beforeUpload:()=>!1,children:C.length>0?"":"Upload"})})})})}),(0,Z.jsx)(j,{level:3,children:"\u041a\u0430\u043a\u043e\u0439 \u044d\u0442\u043e \u0442\u0438\u043f \u0440\u0435\u043a\u043b\u0430\u043c\u044b?"}),(0,Z.jsx)(r.Z.Item,{label:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0442\u043e\u0432\u0430\u0440\u0430",name:"checkProductType",children:(0,Z.jsxs)(d.ZP.Group,{onChange:e=>{E(e.target.value)},value:_,children:[(0,Z.jsx)(d.ZP.Button,{value:"category",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,Z.jsx)(d.ZP.Button,{value:"subCategory",children:"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,Z.jsx)(d.ZP.Button,{value:"brand",children:"\u0411\u0440\u0435\u043d\u0434"}),(0,Z.jsx)(d.ZP.Button,{value:"stock",children:"\u0421\u043a\u0438\u0434\u043a\u0430"})]})}),(0,Z.jsxs)(s.Z,{gutter:20,children:[(0,Z.jsx)(i.Z,{span:12,style:{display:"category"===_?"block":"none"},children:(0,Z.jsx)(r.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",name:"category",rules:[{required:"category"===_,message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,Z.jsx)(u.default,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",optionLabelProp:"label",options:$})})}),(0,Z.jsx)(i.Z,{span:12,style:{display:"subCategory"===_?"block":"none"},children:(0,Z.jsx)(r.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",name:"sub_category",rules:[{required:"subCategory"===_,message:"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,Z.jsx)(u.default,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",optionLabelProp:"label",options:ee})})}),(0,Z.jsx)(i.Z,{span:12,style:{display:"brand"===_?"block":"none"},children:(0,Z.jsx)(r.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0411\u0440\u0435\u043d\u0434",name:"brand",rules:[{required:"brand"===_,message:"\u0411\u0440\u0435\u043d\u0434 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,Z.jsx)(u.default,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u0411\u0440\u0435\u043d\u0434",optionLabelProp:"label",options:te})})}),(0,Z.jsx)(i.Z,{span:12,style:{display:"stock"===_?"block":"none"},children:(0,Z.jsx)(r.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0411\u0440\u0435\u043d\u0434",name:"stock",rules:[{required:"stock"===_,message:"\u0411\u0440\u0435\u043d\u0434 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,Z.jsx)(u.default,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u0411\u0440\u0435\u043d\u0434",optionLabelProp:"label",options:Y})})})]}),(0,Z.jsx)(p.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:H?"Edit":"Add"})]})})}},50881:(e,t,a)=>{a.d(t,{ZP:()=>O});var l=a(87462),n=a(4942),r=a(29439),o=a(81694),s=a.n(o),i=a(75179),c=a(72791),d=a(71929),u=a(1815),p=a(69019),v=c.createContext(null),b=v.Provider;const y=v;var m=c.createContext(null),g=m.Provider,f=a(28083),h=a(88834),x=a(19125),Z=a(91940),j=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(a[l[n]]=e[l[n]])}return a},k=function(e,t){var a,r,o=c.useContext(y),i=c.useContext(m),u=c.useContext(d.E_),p=u.getPrefixCls,v=u.direction,b=c.useRef(),g=(0,h.sQ)(t,b),k=(0,c.useContext)(Z.aM).isFormItemInput,C=e.prefixCls,w=e.className,_=e.children,E=e.style,P=j(e,["prefixCls","className","children","style"]),F=p("radio",C),S="button"===((null===o||void 0===o?void 0:o.optionType)||i)?"".concat(F,"-button"):F,O=(0,l.Z)({},P),I=c.useContext(x.Z);o&&(O.name=o.name,O.onChange=function(t){var a,l;null===(a=e.onChange)||void 0===a||a.call(e,t),null===(l=null===o||void 0===o?void 0:o.onChange)||void 0===l||l.call(o,t)},O.checked=e.value===o.value,O.disabled=null!==(a=O.disabled)&&void 0!==a?a:o.disabled),O.disabled=null!==(r=O.disabled)&&void 0!==r?r:I;var V=s()("".concat(S,"-wrapper"),(0,n.Z)((0,n.Z)((0,n.Z)((0,n.Z)({},"".concat(S,"-wrapper-checked"),O.checked),"".concat(S,"-wrapper-disabled"),O.disabled),"".concat(S,"-wrapper-rtl"),"rtl"===v),"".concat(S,"-wrapper-in-form-item"),k),w);return c.createElement("label",{className:V,style:E,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},c.createElement(f.Z,(0,l.Z)({},O,{type:"radio",prefixCls:S,ref:g})),void 0!==_?c.createElement("span",null,_):null)};const C=c.forwardRef(k);var w=c.forwardRef((function(e,t){var a=c.useContext(d.E_),o=a.getPrefixCls,v=a.direction,y=c.useContext(u.Z),m=(0,i.Z)(e.defaultValue,{value:e.value}),g=(0,r.Z)(m,2),f=g[0],h=g[1],x=e.prefixCls,Z=e.className,j=void 0===Z?"":Z,k=e.options,w=e.buttonStyle,_=void 0===w?"outline":w,E=e.disabled,P=e.children,F=e.size,S=e.style,O=e.id,I=e.onMouseEnter,V=e.onMouseLeave,L=e.onFocus,M=e.onBlur,D=o("radio",x),T="".concat(D,"-group"),q=P;k&&k.length>0&&(q=k.map((function(e){return"string"===typeof e||"number"===typeof e?c.createElement(C,{key:e.toString(),prefixCls:D,disabled:E,value:e,checked:f===e},e):c.createElement(C,{key:"radio-group-value-options-".concat(e.value),prefixCls:D,disabled:e.disabled||E,value:e.value,checked:f===e.value,style:e.style},e.label)})));var N=F||y,R=s()(T,"".concat(T,"-").concat(_),(0,n.Z)((0,n.Z)({},"".concat(T,"-").concat(N),N),"".concat(T,"-rtl"),"rtl"===v),j);return c.createElement("div",(0,l.Z)({},(0,p.Z)(e),{className:R,style:S,onMouseEnter:I,onMouseLeave:V,onFocus:L,onBlur:M,id:O,ref:t}),c.createElement(b,{value:{onChange:function(t){var a=f,l=t.target.value;"value"in e||h(l);var n=e.onChange;n&&l!==a&&n(t)},value:f,disabled:e.disabled,name:e.name,optionType:e.optionType}},q))}));const _=c.memo(w);var E=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(a[l[n]]=e[l[n]])}return a},P=function(e,t){var a=c.useContext(d.E_).getPrefixCls,n=e.prefixCls,r=E(e,["prefixCls"]),o=a("radio",n);return c.createElement(g,{value:"button"},c.createElement(C,(0,l.Z)({prefixCls:o},r,{type:"radio",ref:t})))};const F=c.forwardRef(P);var S=C;S.Button=F,S.Group=_,S.__ANT_RADIO=!0;const O=S},28083:(e,t,a)=>{a.d(t,{Z:()=>v});var l=a(87462),n=a(1413),r=a(4942),o=a(29439),s=a(44925),i=a(81694),c=a.n(i),d=a(75179),u=a(72791),p=["prefixCls","className","style","checked","disabled","defaultChecked","type","onChange"];const v=(0,u.forwardRef)((function(e,t){var a,i=e.prefixCls,v=void 0===i?"rc-checkbox":i,b=e.className,y=e.style,m=e.checked,g=e.disabled,f=e.defaultChecked,h=void 0!==f&&f,x=e.type,Z=void 0===x?"checkbox":x,j=e.onChange,k=(0,s.Z)(e,p),C=(0,u.useRef)(null),w=(0,d.Z)(h,{value:m}),_=(0,o.Z)(w,2),E=_[0],P=_[1];(0,u.useImperativeHandle)(t,(function(){return{focus:function(){var e;null===(e=C.current)||void 0===e||e.focus()},blur:function(){var e;null===(e=C.current)||void 0===e||e.blur()},input:C.current}}));var F=c()(v,b,(a={},(0,r.Z)(a,"".concat(v,"-checked"),E),(0,r.Z)(a,"".concat(v,"-disabled"),g),a));return u.createElement("span",{className:F,style:y},u.createElement("input",(0,l.Z)({},k,{className:"".concat(v,"-input"),ref:C,onChange:function(t){g||("checked"in e||P(t.target.checked),null===j||void 0===j||j({target:(0,n.Z)((0,n.Z)({},e),{},{type:Z,checked:t.target.checked}),stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()},nativeEvent:t.nativeEvent}))},disabled:g,checked:!!E,type:Z})),u.createElement("span",{className:"".concat(v,"-inner")}))}))},42748:(e,t,a)=>{a.d(t,{G:()=>o});var l=a(14937),n=function(e){if((0,l.Z)()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],a=window.document.documentElement;return t.some((function(e){return e in a.style}))}return!1},r=function(e,t){if(!n(e))return!1;var a=document.createElement("div"),l=a.style[e];return a.style[e]=t,a.style[e]!==l};function o(e,t){return Array.isArray(e)||void 0===t?n(e):r(e,t)}}}]);
//# sourceMappingURL=925.278cbcbd.chunk.js.map