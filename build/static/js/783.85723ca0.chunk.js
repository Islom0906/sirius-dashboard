"use strict";(self.webpackChunksirius_tech_motors=self.webpackChunksirius_tech_motors||[]).push([[783],{53016:(e,t,s)=>{s.d(t,{Z:()=>i});s(72791);var a=s(2409),r=s(49389),l=s(80184);const i=e=>{let{label:t,name:s,required:i,required_text:o,warning:n}=e;return(0,l.jsx)(a.Z.Item,{label:n?(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:t}),(0,l.jsx)("br",{}),(0,l.jsx)("p",{children:n})]}):(0,l.jsx)("div",{children:t}),name:s,rules:[{required:i,message:o}],children:(0,l.jsx)(r.default,{})})}},98783:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Z});var a=s(72791),r=s(2409),l=s(50419),i=s(66106),o=s(30914),n=s(83734),d=s(87309),u=s(91933),c=s(27169),m=s(93165),p=s(57689),b=s(16030),h=s(77221),g=s(53016),f=s(80184);const x={title_uz:"",title_ru:"",sub_category:[]},Z=()=>{const[e]=r.Z.useForm(),t=(0,p.s0)(),{editId:s}=(0,b.v9)((e=>e.editData)),Z=(0,b.I0)(),{data:v}=(0,u.useQuery)("get-category",(()=>c.Z.getData("/sub_categories/"))),{mutate:_,data:j,isLoading:y,isSuccess:S}=(0,u.useMutation)((e=>{let{url:t,data:s}=e;return c.Z.postData(t,s)}),{onSuccess:()=>{l.ZP.success("Success")},onError:e=>{for(let t in e.response.data)l.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:w,data:F,refetch:E,isSuccess:I}=(0,u.useQuery)(["edit-brand",s],(()=>c.Z.getDataByID("/brands",s)),{enabled:!1}),{mutate:q,isLoading:V,data:k,isSuccess:C}=(0,u.useMutation)((e=>{let{url:t,data:s,id:a}=e;return c.Z.editData(t,s,a)}),{onSuccess:()=>{l.ZP.success("Success")},onError:e=>{for(let t in e.response.data)l.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,a.useEffect)((()=>{C&&Z({type:h.Pb,payload:""}),(S||C)&&t("/brand")}),[j,k]),(0,a.useEffect)((()=>{""!==s&&E()}),[s]),(0,a.useEffect)((()=>{""===s&&e.setFieldsValue(x)}),[]),(0,a.useEffect)((()=>{const t=[];if(I){var s;null===F||void 0===F||null===(s=F.sub_categories)||void 0===s||s.map((e=>{t.push(e.id)}));const a={title_uz:F.title_uz,title_ru:F.title_ru,sub_category:t};e.setFieldsValue(a)}}),[F]);(0,a.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const s=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",s),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",s)}}),[]);const D=(0,a.useMemo)((()=>null===v||void 0===v?void 0:v.map((e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title_ru})))),[v]);return(0,f.jsx)("div",{children:y||w||V?(0,f.jsx)(m.QP,{}):(0,f.jsxs)(r.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:x,onFinish:e=>{F?q({url:"/brands",data:e,id:s}):_({url:"/brands/",data:e})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,f.jsxs)(i.Z,{gutter:20,children:[(0,f.jsx)(o.Z,{span:12,children:(0,f.jsx)(g.Z,{required:!0,required_text:"Brand kiritishingiz kerak",label:"Brand",name:"title_uz"})}),(0,f.jsx)(o.Z,{span:12,children:(0,f.jsx)(g.Z,{required:!0,required_text:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0431\u0440\u0435\u043d\u0434",label:"\u0411\u0440\u0435\u043d\u0434 Ru",name:"title_ru"})}),(0,f.jsx)(o.Z,{span:24,children:(0,f.jsx)(r.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",name:"sub_category",rules:[{required:!0,message:"\u0421\u0442\u0440\u0430\u043d\u0443 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,f.jsx)(n.default,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",optionLabelProp:"label",options:D})})})]}),(0,f.jsx)(d.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:I?"Edit":"Add"})]})})}},30914:(e,t,s)=>{s.d(t,{Z:()=>a});const a=s(89752).Z}}]);
//# sourceMappingURL=783.85723ca0.chunk.js.map