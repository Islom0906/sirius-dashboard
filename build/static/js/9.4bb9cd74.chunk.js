"use strict";(self.webpackChunkevolution_motors=self.webpackChunkevolution_motors||[]).push([[9],{53016:(e,t,a)=>{a.d(t,{Z:()=>n});a(72791);var i=a(2409),r=a(49389),s=a(80184);const n=e=>{let{label:t,name:a,required:n,required_text:l,warning:o}=e;return(0,s.jsx)(i.Z.Item,{label:o?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:t}),(0,s.jsx)("br",{}),(0,s.jsx)("p",{children:o})]}):(0,s.jsx)("div",{children:t}),name:a,rules:[{required:n,message:l}],children:(0,s.jsx)(r.default,{})})}},87790:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var i=a(72791),r=a(521),s=a(2409),n=a(50419),l=a(66106),o=a(30914),d=a(83734),u=a(93086),c=a(87309),m=a(91933),p=a(27169),v=a(98284),g=a(57689),f=a(16030),h=a(46273),x=a(77221),Z=a(53016),y=a(80184);const{Title:b}=r.default,j={image:[],title_uz:"",title_ru:"",is_index:null},w=()=>{const[e]=s.Z.useForm(),t=(0,g.s0)(),{editId:a}=(0,f.v9)((e=>e.editData)),r=(0,f.I0)(),[w,_]=(0,i.useState)([]),{data:F,refetch:S}=(0,m.useQuery)("get-category-count",(()=>p.Z.getData("/categories-count/")),{enabled:!1}),{mutate:E,data:L,isLoading:I,isSuccess:q}=(0,m.useMutation)((e=>{let{url:t,data:a}=e;return p.Z.postData(t,a)}),{onSuccess:()=>{n.ZP.success("Success")},onError:e=>{for(let t in e.response.data)n.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:z,data:D,refetch:P,isSuccess:V}=(0,m.useQuery)(["edit-category",a],(()=>p.Z.getDataByID("/categories",a)),{enabled:!1}),{mutate:C,isLoading:A,data:M,isSuccess:O}=(0,m.useMutation)((e=>{let{url:t,data:a,id:i}=e;return p.Z.editData(t,a,i)}),{onSuccess:()=>{n.ZP.success("Success")},onError:e=>{for(let t in e.response.data)n.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,i.useEffect)((()=>{O&&r({type:x.Pb,payload:""}),(q||O)&&t("/category")}),[L,M]),(0,i.useEffect)((()=>{""!==a&&P()}),[a]),(0,i.useEffect)((()=>{""===a&&e.setFieldsValue(j),S()}),[]),(0,i.useEffect)((()=>{const t=[{uid:null===D||void 0===D?void 0:D.id,name:null===D||void 0===D?void 0:D.id,status:"done",url:null===D||void 0===D?void 0:D.image}];if(V){const a={image:t,title_uz:D.title_uz,title_ru:D.title_ru,is_index:D.is_index};_(t),e.setFieldsValue(a)}}),[D]);(0,i.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const a=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",a),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",a)}}),[]);const T=(0,i.useMemo)((()=>{if(F)return[{value:!0,label:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c",disabled:(null===F||void 0===F?void 0:F.count)>8},{value:!1,label:"\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0439"}]}),[F]);return(0,y.jsx)("div",{children:I||z||A?(0,y.jsx)(v.QP,{}):(0,y.jsxs)(s.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:j,onFinish:e=>{var t;const i=new FormData;var r;(i.append("title_uz",e.title_uz),i.append("title_ru",e.title_ru),i.append("is_index",e.is_index),null!==(t=w[0])&&void 0!==t&&t.originFileObj)&&i.append("image",null===(r=w[0])||void 0===r?void 0:r.originFileObj);V?C({url:"/categories",data:i,id:a}):E({url:"/categories/",data:i})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,y.jsxs)(l.Z,{gutter:20,children:[(0,y.jsx)(o.Z,{span:12,children:(0,y.jsx)(Z.Z,{required:!0,required_text:"Sarlavha talab qilinadi",label:"Sarlavha Uz",name:"title_uz"})}),(0,y.jsx)(o.Z,{span:12,children:(0,y.jsx)(Z.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"title_ru"})})]}),(0,y.jsxs)(l.Z,{gutter:20,children:[(0,y.jsxs)(o.Z,{span:12,children:[(0,y.jsxs)(b,{level:5,children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435: ",F&&(null===F||void 0===F?void 0:F.count)]}),(0,y.jsx)(s.Z.Item,{label:"\u0421\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u0442\u0430\u043a, \u0447\u0442\u043e\u0431\u044b \u043e\u043d \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u043b\u0441\u044f \u0432 \u0432\u0438\u0434\u0435 \u0431\u0430\u043d\u043d\u0435\u0440\u0430 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435.",name:"is_index",rules:[{required:!0,message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,y.jsx)(d.default,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",optionLabelProp:"label",options:T})})]}),(0,y.jsx)(o.Z,{span:12,children:(0,y.jsx)(s.Z.Item,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439",name:"image",rules:[{required:!0,message:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0431\u0430\u043d\u043d\u0435\u0440\u0430 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e."}],children:(0,y.jsx)(h.Z,{children:(0,y.jsx)(u.Z,{maxCount:1,fileList:w,listType:"picture-card",onChange:t=>{let{fileList:a}=t;_(a),e.setFieldsValue({image:a})},onPreview:async e=>{let t=e.url;t||(t=await new Promise((t=>{const a=new FileReader;a.readAsDataURL(e.originFileObj),a.onload=()=>t(a.result)})));const a=new Image;a.src=t;const i=window.open(t);null===i||void 0===i||i.document.write(a.outerHTML)},beforeUpload:()=>!1,children:w.length>0?"":"Upload"})})})})]}),(0,y.jsx)(c.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:V?"Edit":"Add"})]})})}},31752:(e,t,a)=>{a.d(t,{Z:()=>o});var i=a(1413),r=a(72791);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};var n=a(54291),l=function(e,t){return r.createElement(n.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t,icon:s}))};l.displayName="EditOutlined";const o=r.forwardRef(l)},42748:(e,t,a)=>{a.d(t,{G:()=>n});var i=a(14937),r=function(e){if((0,i.Z)()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],a=window.document.documentElement;return t.some((function(e){return e in a.style}))}return!1},s=function(e,t){if(!r(e))return!1;var a=document.createElement("div"),i=a.style[e];return a.style[e]=t,a.style[e]!==i};function n(e,t){return Array.isArray(e)||void 0===t?r(e):s(e,t)}}}]);
//# sourceMappingURL=9.4bb9cd74.chunk.js.map