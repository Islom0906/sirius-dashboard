"use strict";(self.webpackChunksirius_tech_motors=self.webpackChunksirius_tech_motors||[]).push([[591],{53016:(e,t,s)=>{s.d(t,{Z:()=>l});s(72791);var a=s(2409),i=s(49389),r=s(80184);const l=e=>{let{label:t,name:s,required:l,required_text:n,warning:o}=e;return(0,r.jsx)(a.Z.Item,{label:o?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{children:o})]}):(0,r.jsx)("div",{children:t}),name:s,rules:[{required:l,message:n}],children:(0,r.jsx)(i.default,{})})}},32591:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var a=s(72791),i=s(2409),r=s(50419),l=s(66106),n=s(30914),o=s(87309),u=s(91933),d=s(27169),c=s(93165),m=s(57689),p=s(16030),f=s(77221),h=s(53016),x=s(80184);const Z={title_ru:"",title_uz:""},_=()=>{const[e]=i.Z.useForm(),t=(0,m.s0)(),{editId:s}=(0,p.v9)((e=>e.editData)),_=(0,p.I0)(),{mutate:g,data:j,isLoading:b,isSuccess:y}=(0,u.useMutation)((e=>{let{url:t,data:s}=e;return d.Z.postData(t,s)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let t in e.response.data)r.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:k,data:F,refetch:S,isSuccess:v}=(0,u.useQuery)(["edit-stock",s],(()=>d.Z.getDataByID("/stocks",s)),{enabled:!1}),{mutate:w,isLoading:E,data:I,isSuccess:q}=(0,u.useMutation)((e=>{let{url:t,data:s,id:a}=e;return d.Z.editData(t,s,a)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let t in e.response.data)r.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,a.useEffect)((()=>{q&&_({type:f.Pb,payload:""}),(y||q)&&t("/stock")}),[j,I]),(0,a.useEffect)((()=>{""!==s&&S()}),[s]),(0,a.useEffect)((()=>{""===s&&e.setFieldsValue(Z)}),[]),(0,a.useEffect)((()=>{if(v){const t={title_ru:F.title_ru,title_uz:F.title_uz};e.setFieldsValue(t)}}),[F]);return(0,a.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const s=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",s),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",s)}}),[]),(0,x.jsx)("div",{children:b||k||E?(0,x.jsx)(c.QP,{}):(0,x.jsxs)(i.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:Z,onFinish:e=>{const t=new FormData;t.append("title_ru",e.title_ru),t.append("title_uz",e.title_uz),v?w({url:"/stocks",data:t,id:s}):g({url:"/stocks/",data:t})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,x.jsxs)(l.Z,{gutter:20,children:[(0,x.jsx)(n.Z,{span:12,children:(0,x.jsx)(h.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0442\u0438\u043f \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0438\u043f \u043f\u0440\u043e\u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f",name:"title_ru"})}),(0,x.jsx)(n.Z,{span:12,children:(0,x.jsx)(h.Z,{required:!0,required_text:"Aksiyasini turi kiritish talab qilinadi",label:"Aksiyasini turini kiriting",name:"title_uz"})})]}),(0,x.jsx)(o.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:v?"Edit":"Add"})]})})}},30914:(e,t,s)=>{s.d(t,{Z:()=>a});const a=s(89752).Z}}]);
//# sourceMappingURL=591.cfccfc3f.chunk.js.map