"use strict";(self.webpackChunkevolution_motors=self.webpackChunkevolution_motors||[]).push([[268],{53016:(e,t,a)=>{a.d(t,{Z:()=>o});a(72791);var r=a(2409),l=a(49389),n=a(80184);const o=e=>{let{label:t,name:a,required:o,required_text:s,warning:i}=e;return(0,n.jsx)(r.Z.Item,{label:i?(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:t}),(0,n.jsx)("br",{}),(0,n.jsx)("p",{children:i})]}):(0,n.jsx)("div",{children:t}),name:a,rules:[{required:o,message:s}],children:(0,n.jsx)(l.default,{})})}},56343:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var r=a(72791),l=a(521),n=a(2409),o=a(50419),s=a(66106),i=a(30914),c=a(93086),d=a(50881),u=a(83734),p=a(87309),v=a(91933),b=a(27169),m=a(98284),y=a(57689),f=a(16030),g=a(46273),h=a(77221),x=a(53016),Z=a(80184);const{Title:j}=l.default,C={image:[],title_uz:"",title_ru:"",category:"",sub_category:"",brand:"",stock:""},k=()=>{const[e]=n.Z.useForm(),t=(0,y.s0)(),{editId:a}=(0,f.v9)((e=>e.editData)),l=(0,f.I0)(),[k,w]=(0,r.useState)([]),[E,_]=(0,r.useState)(""),{data:P,refetch:F,isSuccess:S}=(0,v.useQuery)("get-categories",(()=>b.Z.getData("/categories/")),{enabled:!1}),{data:O,refetch:I,isSuccess:L}=(0,v.useQuery)("get-sub-categories",(()=>b.Z.getData("/sub_categories/")),{enabled:!1}),{data:M,refetch:V,isSuccess:D}=(0,v.useQuery)("get-brand",(()=>b.Z.getData("/brands/")),{enabled:!1}),{mutate:N,data:T,isLoading:q,isSuccess:z}=(0,v.useMutation)((e=>{let{url:t,data:a}=e;return b.Z.postData(t,a)}),{onSuccess:()=>{o.ZP.success("Success")},onError:e=>{for(let t in e.response.data)o.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:R,data:B,refetch:A,isSuccess:Q}=(0,v.useQuery)(["edit-index-category",a],(()=>b.Z.getDataByID("/index-categories",a)),{enabled:!1}),{mutate:U,isLoading:G,data:H,isSuccess:J}=(0,v.useMutation)((e=>{let{url:t,data:a,id:r}=e;return b.Z.editData(t,a,r)}),{onSuccess:()=>{o.ZP.success("Success")},onError:e=>{for(let t in e.response.data)o.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,r.useEffect)((()=>{J&&l({type:h.Pb,payload:""}),(z||J)&&t("/index-category")}),[T,H]),(0,r.useEffect)((()=>{""!==a&&A()}),[a]),(0,r.useEffect)((()=>{""===a&&e.setFieldsValue(C)}),[]),(0,r.useEffect)((()=>{const t=[{uid:null===B||void 0===B?void 0:B.id,name:null===B||void 0===B?void 0:B.id,status:"done",url:null===B||void 0===B?void 0:B.image}];if(Q){const a={image:t,title_uz:B.title_uz,title_ru:B.title_ru,category:B.category,sub_category:B.sub_category,brand:B.brand,stock:B.stock};null!==B.category?(_("category"),e.setFieldsValue({checkProductType:"category"})):null!==B.sub_category?(_("subCategory"),e.setFieldsValue({checkProductType:"subCategory"})):null!==B.brand?(_("brand"),e.setFieldsValue({checkProductType:"brand"})):null!==B.stock&&(_("stock"),e.setFieldsValue({checkProductType:"stock"})),w(t),e.setFieldsValue(a)}}),[B]);(0,r.useEffect)((()=>{"category"===E?(S||F(),e.setFieldsValue({sub_category:"",brand:"",stock:""})):"subCategory"===E?(L||I(),e.setFieldsValue({category:"",brand:"",stock:""})):"brand"===E?(D||V(),e.setFieldsValue({category:"",sub_category:"",stock:""})):"stock"===E&&e.setFieldsValue({category:"",sub_category:"",brand:""})}),[E]),(0,r.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const a=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",a),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",a)}}),[]);const W=(0,r.useMemo)((()=>[{value:"best_seller",label:"\u0411\u0435\u0441\u0442\u0441\u0435\u043b\u043b\u0435\u0440"},{value:"daily_product",label:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0442"},{value:"",label:"\u0421 \u0442\u0435\u0445 \u043f\u043e\u0440"}]),[]),K=(0,r.useMemo)((()=>null===P||void 0===P?void 0:P.map((e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title_ru})))),[P]),X=(0,r.useMemo)((()=>null===O||void 0===O?void 0:O.map((e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title_ru})))),[O]),Y=(0,r.useMemo)((()=>null===M||void 0===M?void 0:M.map((e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title_ru})))),[M]);return(0,Z.jsx)("div",{children:q||R||G?(0,Z.jsx)(m.QP,{}):(0,Z.jsxs)(n.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:C,onFinish:e=>{var t;const r=new FormData;var l;(r.append("title_uz",e.title_uz),r.append("title_ru",e.title_ru),r.append("category",e.category),r.append("sub_category",e.sub_category),r.append("brand",e.brand),r.append("stock",""),null!==(t=k[0])&&void 0!==t&&t.originFileObj)&&r.append("image",null===(l=k[0])||void 0===l?void 0:l.originFileObj);Q?U({url:"/index-categories",data:r,id:a}):N({url:"/index-categories/",data:r})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,Z.jsxs)(s.Z,{gutter:20,children:[(0,Z.jsx)(i.Z,{span:12,children:(0,Z.jsx)(x.Z,{required:!0,required_text:"Sarlavha talab qilinadi",label:"Sarlavha Uz",name:"title_uz"})}),(0,Z.jsx)(i.Z,{span:12,children:(0,Z.jsx)(x.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"title_ru"})})]}),(0,Z.jsx)(s.Z,{gutter:20,children:(0,Z.jsx)(i.Z,{span:12,children:(0,Z.jsx)(n.Z.Item,{label:"\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u0430\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",name:"image",rules:[{required:!0,message:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e."}],children:(0,Z.jsx)(g.Z,{children:(0,Z.jsx)(c.Z,{maxCount:1,fileList:k,listType:"picture-card",onChange:t=>{let{fileList:a}=t;w(a),e.setFieldsValue({image:a})},onPreview:async e=>{let t=e.url;t||(t=await new Promise((t=>{const a=new FileReader;a.readAsDataURL(e.originFileObj),a.onload=()=>t(a.result)})));const a=new Image;a.src=t;const r=window.open(t);null===r||void 0===r||r.document.write(a.outerHTML)},beforeUpload:()=>!1,children:k.length>0?"":"Upload"})})})})}),(0,Z.jsx)(j,{level:3,children:"\u041a\u0430\u043a\u043e\u0439 \u044d\u0442\u043e \u0442\u0438\u043f \u0440\u0435\u043a\u043b\u0430\u043c\u044b?"}),(0,Z.jsx)(n.Z.Item,{label:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0442\u043e\u0432\u0430\u0440\u0430",name:"checkProductType",children:(0,Z.jsxs)(d.ZP.Group,{onChange:e=>{_(e.target.value)},value:E,children:[(0,Z.jsx)(d.ZP.Button,{value:"category",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,Z.jsx)(d.ZP.Button,{value:"subCategory",children:"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,Z.jsx)(d.ZP.Button,{value:"brand",children:"\u0411\u0440\u0435\u043d\u0434"}),(0,Z.jsx)(d.ZP.Button,{value:"stock",children:"\u0421\u043a\u0438\u0434\u043a\u0430"})]})}),(0,Z.jsxs)(s.Z,{gutter:20,children:[(0,Z.jsx)(i.Z,{span:12,style:{display:"category"===E?"block":"none"},children:(0,Z.jsx)(n.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",name:"category",rules:[{required:"category"===E,message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,Z.jsx)(u.default,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",optionLabelProp:"label",options:K})})}),(0,Z.jsx)(i.Z,{span:12,style:{display:"subCategory"===E?"block":"none"},children:(0,Z.jsx)(n.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",name:"sub_category",rules:[{required:"subCategory"===E,message:"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,Z.jsx)(u.default,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",optionLabelProp:"label",options:X})})}),(0,Z.jsx)(i.Z,{span:12,style:{display:"brand"===E?"block":"none"},children:(0,Z.jsx)(n.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0411\u0440\u0435\u043d\u0434",name:"brand",rules:[{required:"brand"===E,message:"\u0411\u0440\u0435\u043d\u0434 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,Z.jsx)(u.default,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u0411\u0440\u0435\u043d\u0434",optionLabelProp:"label",options:Y})})}),(0,Z.jsx)(i.Z,{span:12,style:{display:"stock"===E?"block":"none"},children:(0,Z.jsx)(n.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0411\u0440\u0435\u043d\u0434",name:"stock",rules:[{required:"stock"===E,message:"\u0411\u0440\u0435\u043d\u0434 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,Z.jsx)(u.default,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u0411\u0440\u0435\u043d\u0434",optionLabelProp:"label",options:W})})})]}),(0,Z.jsx)(p.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:Q?"Edit":"Add"})]})})}},31752:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(1413),l=a(72791);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};var o=a(54291),s=function(e,t){return l.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:n}))};s.displayName="EditOutlined";const i=l.forwardRef(s)},50881:(e,t,a)=>{a.d(t,{ZP:()=>O});var r=a(87462),l=a(4942),n=a(29439),o=a(81694),s=a.n(o),i=a(75179),c=a(72791),d=a(71929),u=a(1815),p=a(69019),v=c.createContext(null),b=v.Provider;const m=v;var y=c.createContext(null),f=y.Provider,g=a(28083),h=a(88834),x=a(19125),Z=a(91940),j=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(a[r[l]]=e[r[l]])}return a},C=function(e,t){var a,n,o=c.useContext(m),i=c.useContext(y),u=c.useContext(d.E_),p=u.getPrefixCls,v=u.direction,b=c.useRef(),f=(0,h.sQ)(t,b),C=(0,c.useContext)(Z.aM).isFormItemInput,k=e.prefixCls,w=e.className,E=e.children,_=e.style,P=j(e,["prefixCls","className","children","style"]),F=p("radio",k),S="button"===((null===o||void 0===o?void 0:o.optionType)||i)?"".concat(F,"-button"):F,O=(0,r.Z)({},P),I=c.useContext(x.Z);o&&(O.name=o.name,O.onChange=function(t){var a,r;null===(a=e.onChange)||void 0===a||a.call(e,t),null===(r=null===o||void 0===o?void 0:o.onChange)||void 0===r||r.call(o,t)},O.checked=e.value===o.value,O.disabled=null!==(a=O.disabled)&&void 0!==a?a:o.disabled),O.disabled=null!==(n=O.disabled)&&void 0!==n?n:I;var L=s()("".concat(S,"-wrapper"),(0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)({},"".concat(S,"-wrapper-checked"),O.checked),"".concat(S,"-wrapper-disabled"),O.disabled),"".concat(S,"-wrapper-rtl"),"rtl"===v),"".concat(S,"-wrapper-in-form-item"),C),w);return c.createElement("label",{className:L,style:_,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},c.createElement(g.Z,(0,r.Z)({},O,{type:"radio",prefixCls:S,ref:f})),void 0!==E?c.createElement("span",null,E):null)};const k=c.forwardRef(C);var w=c.forwardRef((function(e,t){var a=c.useContext(d.E_),o=a.getPrefixCls,v=a.direction,m=c.useContext(u.Z),y=(0,i.Z)(e.defaultValue,{value:e.value}),f=(0,n.Z)(y,2),g=f[0],h=f[1],x=e.prefixCls,Z=e.className,j=void 0===Z?"":Z,C=e.options,w=e.buttonStyle,E=void 0===w?"outline":w,_=e.disabled,P=e.children,F=e.size,S=e.style,O=e.id,I=e.onMouseEnter,L=e.onMouseLeave,M=e.onFocus,V=e.onBlur,D=o("radio",x),N="".concat(D,"-group"),T=P;C&&C.length>0&&(T=C.map((function(e){return"string"===typeof e||"number"===typeof e?c.createElement(k,{key:e.toString(),prefixCls:D,disabled:_,value:e,checked:g===e},e):c.createElement(k,{key:"radio-group-value-options-".concat(e.value),prefixCls:D,disabled:e.disabled||_,value:e.value,checked:g===e.value,style:e.style},e.label)})));var q=F||m,z=s()(N,"".concat(N,"-").concat(E),(0,l.Z)((0,l.Z)({},"".concat(N,"-").concat(q),q),"".concat(N,"-rtl"),"rtl"===v),j);return c.createElement("div",(0,r.Z)({},(0,p.Z)(e),{className:z,style:S,onMouseEnter:I,onMouseLeave:L,onFocus:M,onBlur:V,id:O,ref:t}),c.createElement(b,{value:{onChange:function(t){var a=g,r=t.target.value;"value"in e||h(r);var l=e.onChange;l&&r!==a&&l(t)},value:g,disabled:e.disabled,name:e.name,optionType:e.optionType}},T))}));const E=c.memo(w);var _=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(a[r[l]]=e[r[l]])}return a},P=function(e,t){var a=c.useContext(d.E_).getPrefixCls,l=e.prefixCls,n=_(e,["prefixCls"]),o=a("radio",l);return c.createElement(f,{value:"button"},c.createElement(k,(0,r.Z)({prefixCls:o},n,{type:"radio",ref:t})))};const F=c.forwardRef(P);var S=k;S.Button=F,S.Group=E,S.__ANT_RADIO=!0;const O=S},28083:(e,t,a)=>{a.d(t,{Z:()=>v});var r=a(87462),l=a(1413),n=a(4942),o=a(29439),s=a(44925),i=a(81694),c=a.n(i),d=a(75179),u=a(72791),p=["prefixCls","className","style","checked","disabled","defaultChecked","type","onChange"];const v=(0,u.forwardRef)((function(e,t){var a,i=e.prefixCls,v=void 0===i?"rc-checkbox":i,b=e.className,m=e.style,y=e.checked,f=e.disabled,g=e.defaultChecked,h=void 0!==g&&g,x=e.type,Z=void 0===x?"checkbox":x,j=e.onChange,C=(0,s.Z)(e,p),k=(0,u.useRef)(null),w=(0,d.Z)(h,{value:y}),E=(0,o.Z)(w,2),_=E[0],P=E[1];(0,u.useImperativeHandle)(t,(function(){return{focus:function(){var e;null===(e=k.current)||void 0===e||e.focus()},blur:function(){var e;null===(e=k.current)||void 0===e||e.blur()},input:k.current}}));var F=c()(v,b,(a={},(0,n.Z)(a,"".concat(v,"-checked"),_),(0,n.Z)(a,"".concat(v,"-disabled"),f),a));return u.createElement("span",{className:F,style:m},u.createElement("input",(0,r.Z)({},C,{className:"".concat(v,"-input"),ref:k,onChange:function(t){f||("checked"in e||P(t.target.checked),null===j||void 0===j||j({target:(0,l.Z)((0,l.Z)({},e),{},{type:Z,checked:t.target.checked}),stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()},nativeEvent:t.nativeEvent}))},disabled:f,checked:!!_,type:Z})),u.createElement("span",{className:"".concat(v,"-inner")}))}))},42748:(e,t,a)=>{a.d(t,{G:()=>o});var r=a(14937),l=function(e){if((0,r.Z)()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],a=window.document.documentElement;return t.some((function(e){return e in a.style}))}return!1},n=function(e,t){if(!l(e))return!1;var a=document.createElement("div"),r=a.style[e];return a.style[e]=t,a.style[e]!==r};function o(e,t){return Array.isArray(e)||void 0===t?l(e):n(e,t)}}}]);
//# sourceMappingURL=268.989d0325.chunk.js.map