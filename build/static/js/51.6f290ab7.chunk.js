"use strict";(self.webpackChunksirius_tech_motors=self.webpackChunksirius_tech_motors||[]).push([[51],{63051:(e,a,s)=>{s.r(a),s.d(a,{default:()=>Z});var t=s(72791),r=s(2409),o=s(50419),l=s(66106),n=s(30914),i=s(49389),c=s(87309),d=s(91933),u=s(27169),m=s(93165),f=s(57689),g=s(16030),p=s(77221),h=s(80184);const b={facebook:"",instagram:"",telegram:""},Z=()=>{const[e]=r.Z.useForm(),a=(0,f.s0)(),{editId:s}=(0,g.v9)((e=>e.editData)),Z=(0,g.I0)(),{mutate:x,data:j,isLoading:F,isSuccess:y}=(0,d.useMutation)((e=>{let{url:a,data:s}=e;return u.Z.postData(a,s)}),{onSuccess:()=>{o.ZP.success("Success")},onError:e=>{for(let a in e.response.data)o.ZP.error("".concat(a,": ").concat(e.response.data[a][0]))}}),{isLoading:I,data:S,refetch:k,isSuccess:E}=(0,d.useQuery)(["edit-social",s],(()=>u.Z.getDataByID("/about/socials",s)),{enabled:!1}),{mutate:v,isLoading:w,data:V,isSuccess:D}=(0,d.useMutation)((e=>{let{url:a,data:s,id:t}=e;return u.Z.editData(a,s,t)}),{onSuccess:()=>{o.ZP.success("Success")},onError:e=>{for(let a in e.response.data)o.ZP.error("".concat(a,": ").concat(e.response.data[a][0]))}});(0,t.useEffect)((()=>{D&&Z({type:p.Pb,payload:""}),(y||D)&&a("/social")}),[j,V]),(0,t.useEffect)((()=>{""!==s&&k()}),[s]),(0,t.useEffect)((()=>{""===s&&e.setFieldsValue(b)}),[]),(0,t.useEffect)((()=>{if(E){const a={facebook:S.facebook.split("//")[1],instagram:S.instagram.split("//")[1],telegram:S.telegram.split("//")[1]};e.setFieldsValue(a)}}),[S]);return(0,t.useEffect)((()=>{const a=JSON.parse(localStorage.getItem("myFormValues"));a&&(a.images=[],e.setFieldsValue(a));const s=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",s),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",s)}}),[]),(0,h.jsx)("div",{children:F||I||w?(0,h.jsx)(m.QP,{}):(0,h.jsxs)(r.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:b,onFinish:e=>{const a={facebook:"https://".concat(e.facebook),telegram:"https://".concat(e.telegram),instagram:"https://".concat(e.instagram)};S?v({url:"/about/socials",data:a,id:s}):x({url:"/about/socials/",data:a})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,h.jsxs)(l.Z,{gutter:20,children:[(0,h.jsx)(n.Z,{span:12,children:(0,h.jsx)(r.Z.Item,{label:"Facebook",name:"facebook",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Facebook"}],children:(0,h.jsx)(i.default,{addonBefore:"https://"})})}),(0,h.jsx)(n.Z,{span:12,children:(0,h.jsx)(r.Z.Item,{label:"Instagram",name:"instagram",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Instagram"}],children:(0,h.jsx)(i.default,{addonBefore:"https://"})})})]}),(0,h.jsx)(l.Z,{gutter:20,children:(0,h.jsx)(n.Z,{span:24,children:(0,h.jsx)(r.Z.Item,{label:"Telegram",name:"telegram",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Telegram"}],children:(0,h.jsx)(i.default,{addonBefore:"https://"})})})}),(0,h.jsx)(c.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:E?"Edit":"Add"})]})})}},30914:(e,a,s)=>{s.d(a,{Z:()=>t});const t=s(89752).Z}}]);
//# sourceMappingURL=51.6f290ab7.chunk.js.map