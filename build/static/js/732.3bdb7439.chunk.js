"use strict";(self.webpackChunksirius_tech_motors=self.webpackChunksirius_tech_motors||[]).push([[732],{53016:(e,t,s)=>{s.d(t,{Z:()=>l});s(72791);var a=s(2409),r=s(49389),i=s(80184);const l=e=>{let{label:t,name:s,required:l,required_text:o,warning:n}=e;return(0,i.jsx)(a.Z.Item,{label:n?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:t}),(0,i.jsx)("br",{}),(0,i.jsx)("p",{children:n})]}):(0,i.jsx)("div",{children:t}),name:s,rules:[{required:l,message:o}],children:(0,i.jsx)(r.default,{})})}},77732:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(72791),r=s(2409),i=s(50419),l=s(66106),o=s(30914),n=s(83734),u=s(87309),d=s(91933),c=s(27169),m=s(93165),g=s(57689),p=s(16030),h=s(77221),f=s(53016),b=s(80184);const x={title_uz:"",title_ru:"",category:null,brand:[]},y=()=>{const[e]=r.Z.useForm(),t=(0,g.s0)(),{editId:s}=(0,p.v9)((e=>e.editData)),y=(0,p.I0)(),{data:Z,refetch:j}=(0,d.useQuery)("get-category",(()=>c.Z.getData("/categories/")),{enabled:!1}),{mutate:_,data:v,isLoading:S,isSuccess:F}=(0,d.useMutation)((e=>{let{url:t,data:s}=e;return c.Z.postData(t,s)}),{onSuccess:()=>{i.ZP.success("Success")},onError:e=>{for(let t in e.response.data)i.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:w,data:E,refetch:I,isSuccess:k}=(0,d.useQuery)(["edit-sub-category",s],(()=>c.Z.getDataByID("/sub_categories",s)),{enabled:!1}),{mutate:q,isLoading:V,data:D,isSuccess:P}=(0,d.useMutation)((e=>{let{url:t,data:s,id:a}=e;return c.Z.editData(t,s,a)}),{onSuccess:()=>{i.ZP.success("Success")},onError:e=>{for(let t in e.response.data)i.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,a.useEffect)((()=>{P&&y({type:h.Pb,payload:""}),(F||P)&&t("/sub-category")}),[v,D]),(0,a.useEffect)((()=>{""!==s&&I()}),[s]),(0,a.useEffect)((()=>{""===s&&e.setFieldsValue(x),j()}),[]),(0,a.useEffect)((()=>{if(k){const t={title_uz:E.title_uz,title_ru:E.title_ru,category:E.categories.id};e.setFieldsValue(t)}}),[E]);(0,a.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const s=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",s),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",s)}}),[]);const C=(0,a.useMemo)((()=>null===Z||void 0===Z?void 0:Z.map((e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title_ru})))),[Z]);return(0,b.jsx)("div",{children:S||w||V?(0,b.jsx)(m.QP,{}):(0,b.jsxs)(r.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:x,onFinish:e=>{E?q({url:"/sub_categories",data:e,id:s}):_({url:"/sub_categories/",data:e})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,b.jsxs)(l.Z,{gutter:20,children:[(0,b.jsx)(o.Z,{span:12,children:(0,b.jsx)(f.Z,{required:!0,required_text:"Qo'shimcha kategoriya kiritishingiz kerak",label:"Qo'shimcha kategoriya",name:"title_uz"})}),(0,b.jsx)(o.Z,{span:12,children:(0,b.jsx)(f.Z,{required:!0,required_text:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",label:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f Ru",name:"title_ru"})}),(0,b.jsx)(o.Z,{span:12,children:(0,b.jsx)(r.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",name:"category",rules:[{required:!0,message:"\u0421\u0442\u0440\u0430\u043d\u0443 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,b.jsx)(n.default,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",optionLabelProp:"label",options:C})})})]}),(0,b.jsx)(u.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:k?"Edit":"Add"})]})})}},30914:(e,t,s)=>{s.d(t,{Z:()=>a});const a=s(89752).Z}}]);
//# sourceMappingURL=732.3bdb7439.chunk.js.map