"use strict";(self.webpackChunkevolution_motors=self.webpackChunkevolution_motors||[]).push([[605],{53016:(e,t,s)=>{s.d(t,{Z:()=>l});s(72791);var a=s(2409),i=s(49389),r=s(80184);const l=e=>{let{label:t,name:s,required:l,required_text:u,warning:n}=e;return(0,r.jsx)(a.Z.Item,{label:n?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{children:n})]}):(0,r.jsx)("div",{children:t}),name:s,rules:[{required:l,message:u}],children:(0,r.jsx)(i.default,{})})}},83386:(e,t,s)=>{s.d(t,{Z:()=>l});s(72791);var a=s(2409),i=s(66920),r=s(80184);const l=e=>{let{label:t,name:s,required:l,required_text:u}=e;return(0,r.jsx)(a.Z.Item,{label:t,name:s,rules:[{required:l,message:u}],children:(0,r.jsx)(i.Z,{rows:4})})}},59605:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Z});var a=s(72791),i=s(2409),r=s(50419),l=s(66106),u=s(30914),n=s(93086),d=s(87309),o=s(91933),c=s(27169),m=s(98284),_=s(57689),p=s(16030),b=s(46273),h=s(77221),x=s(53016),v=s(83386),g=s(80184);const j={image:[],title_uz:"",title_ru:"",sub_title_uz:"",sub_title_ru:""},Z=()=>{const[e]=i.Z.useForm(),t=(0,_.s0)(),{editId:s}=(0,p.v9)((e=>e.editData)),Z=(0,p.I0)(),[f,w]=(0,a.useState)([]),{mutate:F,data:q,isLoading:S,isSuccess:y}=(0,o.useMutation)((e=>{let{url:t,data:s}=e;return c.Z.postData(t,s)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let t in e.response.data)r.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:z,data:I,refetch:E,isSuccess:L}=(0,o.useQuery)(["edit-service",s],(()=>c.Z.getDataByID("/about/services",s)),{enabled:!1}),{mutate:V,isLoading:D,data:P,isSuccess:C}=(0,o.useMutation)((e=>{let{url:t,data:s,id:a}=e;return c.Z.editData(t,s,a)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let t in e.response.data)r.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,a.useEffect)((()=>{C&&Z({type:h.Pb,payload:""}),(y||C)&&t("/service")}),[q,P]),(0,a.useEffect)((()=>{""!==s&&E()}),[s]),(0,a.useEffect)((()=>{""===s&&e.setFieldsValue(j)}),[]),(0,a.useEffect)((()=>{const t=[{uid:null===I||void 0===I?void 0:I.id,name:null===I||void 0===I?void 0:I.id,status:"done",url:null===I||void 0===I?void 0:I.image}];if(L){const s={image:t,title_uz:I.title_uz,title_ru:I.title_ru,sub_title_uz:I.sub_title_uz,sub_title_ru:I.sub_title_ru};w(t),e.setFieldsValue(s)}}),[I]);(0,a.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const s=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",s),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",s)}}),[]);return(0,g.jsx)("div",{children:S||z||D?(0,g.jsx)(m.QP,{}):(0,g.jsxs)(i.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:j,onFinish:e=>{var t;const a=new FormData;var i;(a.append("title_uz",e.title_uz),a.append("title_ru",e.title_ru),a.append("sub_title_uz",e.sub_title_uz),a.append("sub_title_ru",e.sub_title_ru),null!==(t=f[0])&&void 0!==t&&t.originFileObj)&&a.append("image",null===(i=f[0])||void 0===i?void 0:i.originFileObj);L?V({url:"/about/services",data:a,id:s}):F({url:"/about/services/",data:a})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,g.jsxs)(l.Z,{gutter:20,children:[(0,g.jsx)(u.Z,{span:12,children:(0,g.jsx)(x.Z,{required:!0,required_text:"Sarlavha talab qilinadi",label:"Sarlavha Uz",name:"title_uz"})}),(0,g.jsx)(u.Z,{span:12,children:(0,g.jsx)(x.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"title_ru"})})]}),(0,g.jsxs)(l.Z,{gutter:20,children:[(0,g.jsx)(u.Z,{span:12,children:(0,g.jsx)(v.Z,{required:!0,required_text:"Qo'shimcha sarlavha kiritish talab qilinada",label:"Qo'shimcha sarlavha Uz",name:"sub_title_uz"})}),(0,g.jsx)(u.Z,{span:12,children:(0,g.jsx)(v.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 Ru",name:"sub_title_ru"})})]}),(0,g.jsx)(l.Z,{gutter:20,children:(0,g.jsx)(u.Z,{span:12,children:(0,g.jsx)(i.Z.Item,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439",name:"image",rules:[{required:!0,message:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0431\u0430\u043d\u043d\u0435\u0440\u0430 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e."}],children:(0,g.jsx)(b.Z,{children:(0,g.jsx)(n.Z,{maxCount:1,fileList:f,listType:"picture-card",onChange:t=>{let{fileList:s}=t;w(s),e.setFieldsValue({image:s})},onPreview:async e=>{let t=e.url;t||(t=await new Promise((t=>{const s=new FileReader;s.readAsDataURL(e.originFileObj),s.onload=()=>t(s.result)})));const s=new Image;s.src=t;const a=window.open(t);null===a||void 0===a||a.document.write(s.outerHTML)},beforeUpload:()=>!1,children:f.length>0?"":"Upload"})})})})}),(0,g.jsx)(d.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:L?"Edit":"Add"})]})})}}}]);
//# sourceMappingURL=605.c015c49c.chunk.js.map