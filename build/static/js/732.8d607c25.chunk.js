"use strict";(self.webpackChunkevolution_motors=self.webpackChunkevolution_motors||[]).push([[732],{53016:(e,t,a)=>{a.d(t,{Z:()=>i});a(72791);var s=a(2409),l=a(49389),r=a(80184);const i=e=>{let{label:t,name:a,required:i,required_text:o,warning:d}=e;return(0,r.jsx)(s.Z.Item,{label:d?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{children:d})]}):(0,r.jsx)("div",{children:t}),name:a,rules:[{required:i,message:o}],children:(0,r.jsx)(l.default,{})})}},77732:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(72791),l=a(2409),r=a(50419),i=a(66106),o=a(30914),d=a(83734),n=a(87309),u=a(91933),c=a(27169),m=a(98284),p=a(57689),g=a(16030),h=a(77221),b=a(53016),v=a(80184);const f={title_uz:"",title_ru:"",category:null,brand:[]},x=()=>{const[e]=l.Z.useForm(),t=(0,p.s0)(),{editId:a}=(0,g.v9)((e=>e.editData)),x=(0,g.I0)(),{data:y,refetch:Z}=(0,u.useQuery)("get-category",(()=>c.Z.getData("/categories/")),{enabled:!1}),{data:j,refetch:_}=(0,u.useQuery)("get-brand",(()=>c.Z.getData("/brands/")),{enabled:!1}),{mutate:w,data:S,isLoading:F,isSuccess:I}=(0,u.useMutation)((e=>{let{url:t,data:a}=e;return c.Z.postData(t,a)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let t in e.response.data)r.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:E,data:k,refetch:q,isSuccess:C}=(0,u.useQuery)(["edit-sub-category",a],(()=>c.Z.getDataByID("/sub_categories",a)),{enabled:!1}),{mutate:D,isLoading:P,data:V,isSuccess:L}=(0,u.useMutation)((e=>{let{url:t,data:a,id:s}=e;return c.Z.editData(t,a,s)}),{onSuccess:()=>{r.ZP.success("Success")},onError:e=>{for(let t in e.response.data)r.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,s.useEffect)((()=>{L&&x({type:h.Pb,payload:""}),(I||L)&&t("/sub-category")}),[S,V]),(0,s.useEffect)((()=>{""!==a&&q()}),[a]),(0,s.useEffect)((()=>{""===a&&e.setFieldsValue(f),Z(),_()}),[]),(0,s.useEffect)((()=>{const t=[];if(C){var a;null===k||void 0===k||null===(a=k.brands)||void 0===a||a.map((e=>{t.push(null===e||void 0===e?void 0:e.id)}));const s={title_uz:k.title_uz,title_ru:k.title_ru,category:k.categories.id,brand:t};console.log(s),e.setFieldsValue(s)}}),[k]);(0,s.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const a=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",a),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",a)}}),[]);const Q=(0,s.useMemo)((()=>null===y||void 0===y?void 0:y.map((e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title_ru})))),[y]),z=(0,s.useMemo)((()=>null===j||void 0===j?void 0:j.map((e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.title_ru})))),[j]);return(0,v.jsx)("div",{children:F||E||P?(0,v.jsx)(m.QP,{}):(0,v.jsxs)(l.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:f,onFinish:e=>{k?D({url:"/sub_categories",data:e,id:a}):w({url:"/sub_categories/",data:e})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,v.jsxs)(i.Z,{gutter:20,children:[(0,v.jsx)(o.Z,{span:12,children:(0,v.jsx)(b.Z,{required:!0,required_text:"Qo'shimcha kategoriya kiritishingiz kerak",label:"Qo'shimcha kategoriya",name:"title_uz"})}),(0,v.jsx)(o.Z,{span:12,children:(0,v.jsx)(b.Z,{required:!0,required_text:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",label:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f Ru",name:"title_ru"})}),(0,v.jsx)(o.Z,{span:12,children:(0,v.jsx)(l.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",name:"category",rules:[{required:!0,message:"\u0421\u0442\u0440\u0430\u043d\u0443 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,v.jsx)(d.default,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",optionLabelProp:"label",options:Q})})}),(0,v.jsx)(o.Z,{span:12,children:(0,v.jsx)(l.Z.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0440\u0435\u043d\u0434",name:"brand",rules:[{required:!0,message:"\u0411\u0440\u0435\u043d\u0434 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u044b"}],wrapperCol:{span:24},children:(0,v.jsx)(d.default,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u0443 \u0431\u0440\u0435\u043d\u0434",optionLabelProp:"label",options:z})})})]}),(0,v.jsx)(n.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:C?"Edit":"Add"})]})})}},30914:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a(89752).Z}}]);
//# sourceMappingURL=732.8d607c25.chunk.js.map