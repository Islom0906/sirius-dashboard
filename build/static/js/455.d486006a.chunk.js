"use strict";(self.webpackChunkevolution_motors=self.webpackChunkevolution_motors||[]).push([[455],{53016:(e,s,a)=>{a.d(s,{Z:()=>n});a(72791);var r=a(2409),t=a(49389),d=a(80184);const n=e=>{let{label:s,name:a,required:n,required_text:l,warning:i}=e;return(0,d.jsx)(r.Z.Item,{label:i?(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{children:s}),(0,d.jsx)("br",{}),(0,d.jsx)("p",{children:i})]}):(0,d.jsx)("div",{children:s}),name:a,rules:[{required:n,message:l}],children:(0,d.jsx)(t.default,{})})}},96185:(e,s,a)=>{a.r(s),a.d(s,{default:()=>b});var r=a(72791),t=a(2409),d=a(50419),n=a(66106),l=a(30914),i=a(87309),o=a(91933),u=a(27169),c=a(98284),m=a(57689),p=a(16030),x=a(77221),h=a(53016),Z=a(49389),j=a(80184);const _=e=>{let{label:s,name:a,required:r,required_text:d}=e;return(0,j.jsx)(t.Z.Item,{label:s,name:a,rules:[{required:r,message:d},{validator:(e,s,a)=>{!s||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?a():a("Please enter a valid email address")}}],children:(0,j.jsx)(Z.default,{})})},f={address_uz:"",address_ru:"",phone_1:"",phone_2:"",email:"",map:""},b=()=>{const[e]=t.Z.useForm(),s=(0,m.s0)(),{editId:a}=(0,p.v9)((e=>e.editData)),Z=(0,p.I0)(),{mutate:b,data:g,isLoading:q,isSuccess:v}=(0,o.useMutation)((e=>{let{url:s,data:a}=e;return u.Z.postData(s,a)}),{onSuccess:()=>{d.ZP.success("Success")},onError:e=>{for(let s in e.response.data)d.ZP.error("".concat(s,": ").concat(e.response.data[s][0]))}}),{isLoading:y,data:S,refetch:F,isSuccess:E}=(0,o.useQuery)(["edit-contact",a],(()=>u.Z.getDataByID("/about/contacts",a)),{enabled:!1}),{mutate:I,isLoading:w,data:V,isSuccess:k}=(0,o.useMutation)((e=>{let{url:s,data:a,id:r}=e;return u.Z.editData(s,a,r)}),{onSuccess:()=>{d.ZP.success("Success")},onError:e=>{for(let s in e.response.data)d.ZP.error("".concat(s,": ").concat(e.response.data[s]))}});(0,r.useEffect)((()=>{k&&Z({type:x.Pb,payload:""}),(v||k)&&s("/contact")}),[g,V]),(0,r.useEffect)((()=>{""!==a&&F()}),[a]),(0,r.useEffect)((()=>{""===a&&e.setFieldsValue(f)}),[]),(0,r.useEffect)((()=>{if(E){const s={address_uz:S.address_uz,address_ru:S.address_ru,phone_1:S.phone_1,phone_2:S.phone_2,email:S.email,map:S.map};e.setFieldsValue(s)}}),[S]);return(0,r.useEffect)((()=>{const s=JSON.parse(localStorage.getItem("myFormValues"));s&&(s.images=[],e.setFieldsValue(s));const a=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",a),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",a)}}),[]),(0,j.jsx)("div",{children:q||y||w?(0,j.jsx)(c.QP,{}):(0,j.jsxs)(t.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:f,onFinish:e=>{S?I({url:"/about/contacts",data:e,id:a}):b({url:"/about/contacts/",data:e})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,j.jsxs)(n.Z,{gutter:20,children:[(0,j.jsx)(l.Z,{span:12,children:(0,j.jsx)(h.Z,{required:!0,required_text:"Address kiritish kerak",label:"Address Uz",name:"address_uz"})}),(0,j.jsx)(l.Z,{span:12,children:(0,j.jsx)(h.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0430\u0434\u0440\u0435\u0441",label:"\u0410\u0434\u0440\u0435\u0441 Ru",name:"address_ru"})})]}),(0,j.jsxs)(n.Z,{gutter:20,children:[(0,j.jsx)(l.Z,{span:12,children:(0,j.jsx)(h.Z,{required:!0,required_text:"\u0412\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 1",name:"phone_1"})}),(0,j.jsx)(l.Z,{span:12,children:(0,j.jsx)(h.Z,{required:!0,required_text:"\u0412\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 2",name:"phone_2"})}),(0,j.jsx)(l.Z,{span:24,children:(0,j.jsx)(_,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",name:"email"})})]}),(0,j.jsx)(n.Z,{gutter:20,children:(0,j.jsx)(l.Z,{span:24,children:(0,j.jsx)(h.Z,{required:!0,required_text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e",label:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e",name:"map"})})}),(0,j.jsx)(i.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:E?"Edit":"Add"})]})})}},30914:(e,s,a)=>{a.d(s,{Z:()=>r});const r=a(89752).Z}}]);
//# sourceMappingURL=455.d486006a.chunk.js.map